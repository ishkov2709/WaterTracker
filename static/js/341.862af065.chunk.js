"use strict";(self.webpackChunkwatertracker=self.webpackChunkwatertracker||[]).push([[341],{2341:function(e,s,r){r.r(s),r.d(s,{default:function(){return P}});var a=r(2791),n=r(9434),i=r(3076),t=r(1413),o=r(5861),c=r(9439),d=r(4687),l=r.n(d),u=r(1365),m=r(7689),p=r(5705),h=r(7287),x=r(6036),w=r(5757),f=r(6727),j=f.Ry().shape({email:f.Z_().matches(/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/,"Invalid email").required("Email is required"),password:f.Z_().matches(/^(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,64}$/,"Password should have letters, numbers, special characters").min(8,"Too short password").max(64,"Too long password").required("Password is required"),repeatPassword:f.Z_().oneOf([f.iH("password"),null],"Passwords must match").min(8,"Too short password").max(64,"Too long password").required("Repeat password is required")}),g=r(9085),v=(r(5462),r(9488)),y=r(3824),Z=r(184),k={email:"",password:"",repeatPassword:""},S=function(e){var s=e.signup,r=e.resend,i=(0,a.useState)(!1),d=(0,c.Z)(i,2),f=d[0],S=d[1],P=(0,a.useState)(!1),b=(0,c.Z)(P,2),q=b[0],E=b[1],F=(0,m.s0)(),_=(0,y.a)(),C=_.error,N=_.successful,A=(0,n.I0)(),I=function(e){localStorage.setItem("registrationEmail",e)},$=localStorage.getItem("registrationEmail")||"",R=(0,a.useState)($),T=(0,c.Z)(R,2),U=T[0],B=T[1],G=(0,a.useCallback)((function(){g.Am.info("Success! Please, check your mail for confirmation."),setTimeout((function(){F("/signin")}),6e3),A((0,v.HA)())}),[A,F]);(0,a.useEffect)((function(){N&&!C&&G(),C&&(g.Am.error(C),A((0,v.q$)()))}),[A,N,C,G]);var H=function(){var e=(0,o.Z)(l().mark((function e(r,a){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.setSubmitting,I(r.email),B(r.email),e.next=5,s({email:r.email,password:r.password});case 5:n(!1);case 6:case"end":return e.stop()}}),e)})));return function(s,r){return e.apply(this,arguments)}}(),z=function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!U){e.next=6;break}return e.next=3,r({email:U});case 3:G(),e.next=7;break;case 6:g.Am.error("You have not entered any email yet.");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(e){"password"===e?S(!f):"repeatPassword"===e&&E(!q)};return(0,Z.jsx)(w.im,{children:(0,Z.jsx)(u.Z,{children:(0,Z.jsx)(x.xu,{children:(0,Z.jsxs)("div",{children:[(0,Z.jsx)(p.J9,{initialValues:(0,t.Z)({email:U},k),validationSchema:j,onSubmit:H,children:function(e){var s=e.isSubmitting,r=e.errors,a=e.touched;return(0,Z.jsxs)(x.Gq,{children:[(0,Z.jsx)(x.Dx,{children:"Sign Up"}),(0,Z.jsxs)("div",{children:[(0,Z.jsx)(x.__,{children:"Enter your email"}),(0,Z.jsx)(p.gN,{as:x.Fy,type:"email",name:"email",placeholder:"Email",hasError:a.email&&r.email,required:!0}),(0,Z.jsx)(p.Bc,{name:"email",component:x.mF})]}),(0,Z.jsxs)("div",{children:[(0,Z.jsx)(x.__,{children:"Enter your password"}),(0,Z.jsxs)(x.FU,{children:[(0,Z.jsx)(p.gN,{as:x.Fy,type:f?"text":"password",name:"password",placeholder:"Password",hasError:a.password&&r.password,required:!0}),(0,Z.jsx)("span",{onClick:function(){return D("password")},children:f?(0,Z.jsx)("svg",{className:"eye",children:(0,Z.jsx)("use",{href:h.Z+"#eye"})}):(0,Z.jsx)("svg",{className:"eye",children:(0,Z.jsx)("use",{href:h.Z+"#hidden"})})})]}),(0,Z.jsx)(p.Bc,{name:"password",component:x.mF})]}),(0,Z.jsxs)("div",{children:[(0,Z.jsx)(x.__,{children:"Repeat password"}),(0,Z.jsxs)(x.FU,{children:[(0,Z.jsx)(p.gN,{as:x.Fy,type:q?"text":"password",name:"repeatPassword",placeholder:"Repeat password",required:!0,hasError:a.repeatPassword&&r.repeatPassword}),(0,Z.jsx)("span",{onClick:function(){return D("repeatPassword")},children:q?(0,Z.jsx)("svg",{className:"eye",children:(0,Z.jsx)("use",{href:h.Z+"#eye"})}):(0,Z.jsx)("svg",{className:"eye",children:(0,Z.jsx)("use",{href:h.Z+"#hidden"})})})]}),(0,Z.jsx)(p.Bc,{name:"repeatPassword",component:x.mF})]}),(0,Z.jsx)(x.$2,{type:"submit",width:336,disabled:s,children:"Sign Up"})]})}}),(0,Z.jsx)(x.Zi,{to:"/signin",children:"Sign in"}),(0,Z.jsx)(x.uG,{onClick:z,children:"Resend Confirmation Email"}),(0,Z.jsx)(g.Ix,{})]})})})})},P=function(){var e=(0,n.I0)();return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(S,{signup:function(s){e((0,i.SA)(s))},resend:function(s){e((0,i.WC)(s))}})})}}}]);
//# sourceMappingURL=341.862af065.chunk.js.map