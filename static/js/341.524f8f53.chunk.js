"use strict";(self.webpackChunkwatertracker=self.webpackChunkwatertracker||[]).push([[341],{2341:function(e,s,r){r.r(s),r.d(s,{default:function(){return S}});var a=r(2791),n=r(3855),i=r(3076),t=r(1413),o=r(5861),c=r(9439),d=r(4687),l=r.n(d),u=r(1365),m=r(7689),p=r(5705),h=r(3101),x=r(7287),w=r(6036),f=r(5757),j=r(6727),g=j.Ry().shape({email:j.Z_().matches(/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/,"Invalid email").required("Email is required"),password:j.Z_().matches(/^(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,64}$/,"Password should have letters, numbers, special characters").min(8,"Too short password").max(64,"Too long password").required("Password is required"),repeatPassword:j.Z_().oneOf([j.iH("password"),null],"Passwords must match").min(8,"Too short password").max(64,"Too long password").required("Repeat password is required")}),v=r(9085),y=(r(5462),r(9488)),Z=r(184),k={email:"",password:"",repeatPassword:""},P=function(e){var s=e.signup,r=e.resend,i=(0,a.useState)(!1),d=(0,c.Z)(i,2),j=d[0],P=d[1],S=(0,a.useState)(!1),q=(0,c.Z)(S,2),E=q[0],b=q[1],_=(0,n.v9)(h._J),C=(0,m.s0)(),F=(0,n.v9)(h.eH),N=(0,n.I0)(),A=function(e){localStorage.setItem("registrationEmail",e)},I=localStorage.getItem("registrationEmail")||"",$=(0,a.useState)(I),R=(0,c.Z)($,2),T=R[0],U=R[1],B=(0,a.useCallback)((function(){v.Am.info("Success! Please, check your mail for confirmation."),setTimeout((function(){C("/signin")}),6e3),N((0,y.HA)())}),[N,C]);(0,a.useEffect)((function(){console.log(_),_&&!F&&B(),F&&(v.Am.error(F),N((0,y.q$)()))}),[N,_,F,B]);var H=function(){var e=(0,o.Z)(l().mark((function e(r,a){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.setSubmitting,A(r.email),U(r.email),e.next=5,s({email:r.email,password:r.password});case 5:n(!1);case 6:case"end":return e.stop()}}),e)})));return function(s,r){return e.apply(this,arguments)}}(),G=function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r({email:T});case 2:v.Am.info("Confirmation email has been resent. Please check your email.");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(e){"password"===e?P(!j):"repeatPassword"===e&&b(!E)};return(0,Z.jsx)(f.im,{children:(0,Z.jsx)(u.Z,{children:(0,Z.jsx)(w.xu,{children:(0,Z.jsxs)("div",{children:[(0,Z.jsx)(p.J9,{initialValues:(0,t.Z)({email:T},k),validationSchema:g,onSubmit:H,children:function(e){var s=e.isSubmitting,r=e.errors,a=e.touched;return(0,Z.jsxs)(w.Gq,{children:[(0,Z.jsx)(w.Dx,{children:"Sign Up"}),(0,Z.jsxs)("div",{children:[(0,Z.jsx)(w.__,{children:"Enter your email"}),(0,Z.jsx)(p.gN,{as:w.Fy,type:"email",name:"email",placeholder:"Email",hasError:a.email&&r.email,required:!0}),(0,Z.jsx)(p.Bc,{name:"email",component:w.mF})]}),(0,Z.jsxs)("div",{children:[(0,Z.jsx)(w.__,{children:"Enter your password"}),(0,Z.jsxs)(w.FU,{children:[(0,Z.jsx)(p.gN,{as:w.Fy,type:j?"text":"password",name:"password",placeholder:"Password",hasError:a.password&&r.password,required:!0}),(0,Z.jsx)("span",{onClick:function(){return J("password")},children:j?(0,Z.jsx)("svg",{className:"eye",children:(0,Z.jsx)("use",{href:x.Z+"#eye"})}):(0,Z.jsx)("svg",{className:"eye",children:(0,Z.jsx)("use",{href:x.Z+"#hidden"})})})]}),(0,Z.jsx)(p.Bc,{name:"password",component:w.mF})]}),(0,Z.jsxs)("div",{children:[(0,Z.jsx)(w.__,{children:"Repeat password"}),(0,Z.jsxs)(w.FU,{children:[(0,Z.jsx)(p.gN,{as:w.Fy,type:E?"text":"password",name:"repeatPassword",placeholder:"Repeat password",required:!0,hasError:a.repeatPassword&&r.repeatPassword}),(0,Z.jsx)("span",{onClick:function(){return J("repeatPassword")},children:E?(0,Z.jsx)("svg",{className:"eye",children:(0,Z.jsx)("use",{href:x.Z+"#eye"})}):(0,Z.jsx)("svg",{className:"eye",children:(0,Z.jsx)("use",{href:x.Z+"#hidden"})})})]}),(0,Z.jsx)(p.Bc,{name:"repeatPassword",component:w.mF})]}),(0,Z.jsx)(w.$2,{type:"submit",width:336,disabled:s,children:"Sign Up"})]})}}),(0,Z.jsx)(w.Zi,{to:"/signin",children:"Sign in"}),(0,Z.jsx)(w.uG,{onClick:G,children:"Resend Confirmation Email"}),(0,Z.jsx)(v.Ix,{})]})})})})},S=function(){var e=(0,n.I0)();return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(P,{signup:function(s){e((0,i.SA)(s))},resend:function(s){e((0,i.WC)(s))}})})}}}]);
//# sourceMappingURL=341.524f8f53.chunk.js.map